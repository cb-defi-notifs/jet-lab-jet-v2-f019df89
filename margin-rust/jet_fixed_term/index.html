<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="An orderbook-based fixed term market hosted on the Solana blockchain"><meta name="keywords" content="rust, rustlang, rust-lang, jet_fixed_term"><title>jet_fixed_term - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" href="../normalize.css"><link rel="stylesheet" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" href="../ayu.css" disabled><link rel="stylesheet" href="../dark.css" disabled><link rel="stylesheet" href="../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../storage.js"></script><script defer src="../crates.js"></script><script defer src="../main.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../favicon.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../jet_fixed_term/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div></a><h2 class="location"></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../jet_fixed_term/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div></a><h2 class="location"><a href="#">Crate jet_fixed_term</a></h2><div class="sidebar-elems"><div class="block"><ul><li class="version">Version 0.1.0</li><li><a id="all-types" href="all.html">All Items</a></li></ul></div><section><div class="block"><ul><li><a href="#modules">Modules</a></li><li><a href="#enums">Enums</a></li><li><a href="#statics">Statics</a></li><li><a href="#functions">Functions</a></li></ul></div></section></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../jet_fixed_term/index.html"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></a><nav class="sub"><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><button type="button">?</button></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../wheel.svg"></a></div></div></form></nav></div><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn"><span class="in-band">Crate <a class="mod" href="#">jet_fixed_term</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a class="srclink" href="../src/jet_fixed_term/lib.rs.html#1-382">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>An orderbook-based fixed term market hosted on the Solana blockchain</p>
<h2 id="interaction"><a href="#interaction">Interaction</a></h2>
<p>To interact with the fixed term market, users will initialize a PDA called an <a href="struct@crate::orderbook::state::user::MarginUser"><code>MarginUser</code></a>.</p>
<p>After <code>MarginUser</code> intialization, to place an order you must deposit underlying tokens or Jet fixed term market tickets into your account.
This will allow you to use the <a href="struct@crate::orderbook::instructions::place_order::PlaceOrder"><code>PlaceOrder</code></a> instruction, which
utilizes the orderbook to match borrowers and lenders.</p>
<h4 id="lending"><a href="#lending">Lending</a></h4>
<p>To lend tokens, a user will deposit the underlying token into their <code>MarginUser</code> account. Then, they may post
orders on the book using the <a href="struct@crate::orderbook::instructions::place_order::PlaceOrder"><code>PlaceOrder</code></a> with a given set of
<a href="orderbook/state/struct.OrderParams.html"><code>OrderParams</code></a>.</p>
<p>For example, to lend <code>1_000_000</code> tokens at 15% interest in a given market, a lender would specify:</p>

<div class="example-wrap ignore"><div class='tooltip'>ⓘ</div><pre class="rust rust-example-rendered"><code>OrderParams {
    <span class="doccomment">/// We want as many tickets as the book will give us
    </span>max_ticket_qty: u64::MAX,
    <span class="doccomment">/// we are lending 1_000_000 tokens
    </span>max_underlying_token_qty: <span class="number">1_000_000</span>,
    <span class="doccomment">/// use the crate function to generate a limit price
    </span>limit_price: limit_price_from_f32((<span class="number">1.0 </span>/ <span class="number">1.15</span>)),
    <span class="doccomment">/// limit the number of matches to 100
    </span>match_limit: <span class="number">100</span>,
    <span class="doccomment">/// Do not fail transaction if order crosses the spread
    </span>post_only: <span class="bool-val">false</span>,
    <span class="doccomment">/// If order does not get filled immediately, post remainder to the book
    </span>post_allowed: <span class="bool-val">true</span>,
    <span class="doccomment">/// stake generated tickets automatically, creating `SplitTicket`s
    </span>auto_stake: <span class="bool-val">true</span>,
}</code></pre></div>
<h4 id="borrowing"><a href="#borrowing">Borrowing</a></h4>
<p>For borrowing, a user has two options. They can buy Jet fixed term market tickets from some market, and deposit them into their
<code>MarginUser</code> account. Or, they may use the <code>jet-margin</code> program to place collateralized borrow orders.</p>
<p>In the case of a collateralized order, an <code>TermLoan</code> will be minted to track the debt. A user must repay or face liquidation
by the <code>jet-margin</code> program.</p>
<p>Example borrow order, where a borrower wants no more than 10% interest to borrow 100_000_000 tokens</p>

<div class="example-wrap ignore"><div class='tooltip'>ⓘ</div><pre class="rust rust-example-rendered"><code>OrderParams {
    <span class="doccomment">/// We want to pay no more than 10%
    </span>max_ticket_qty: <span class="number">110_000_000</span>,
    <span class="doccomment">/// we only need to borrow 100_000_000 tokens
    </span>max_underlying_token_qty: <span class="number">100_000_000</span>,
    <span class="doccomment">/// use the crate function to generate a limit price
    </span>limit_price: limit_price_from_f32((<span class="number">1.0 </span>/ <span class="number">1.10</span>)),
    <span class="doccomment">/// limit the number of matches to 100
    </span>match_limit: <span class="number">100</span>,
    <span class="doccomment">/// Do not fail transaction if order crosses the spread
    </span>post_only: <span class="bool-val">false</span>,
    <span class="doccomment">/// If order does not get filled immediately, post remainder to the book
    </span>post_allowed: <span class="bool-val">true</span>,
    <span class="doccomment">/// borrowers do not stake tickets
    </span>auto_stake: <span class="bool-val">false</span>,
}</code></pre></div>
<h2 id="orderbook-matching-engine"><a href="#orderbook-matching-engine">Orderbook matching engine</a></h2>
<p>To facilitate the pairing of lenders and borrowers, the program utilizes the <code>agnostic-orderbook</code> crate to create an
orderbook. This orderbook allows lenders and borrowers to post orders using underlying tokens, held Jet fixed term market tickets, or, by utilizing <code>jet-margin</code> accounts,
a collateralized borrow order in lieu of held funds.</p>
<h4 id="eventqueue-operation-and-adapters"><a href="#eventqueue-operation-and-adapters">EventQueue operation and Adapters</a></h4>
<p>The orderbook works by matching posted orders and pushing events to an <code>EventQueue</code> to be consumed by a crank operating offchain by
sending transactions to Solana.</p>
<p>Some users may want to subscribe to events generated by the orderbook matching. To do this, a user must register with
the program an <code>Adapter</code> through their <code>MarginUser</code> account using the <a href="orderbook/instructions/event_adapter/register_adapter/struct.RegisterAdapter.html"><code>RegisterAdapter</code></a> instruction. This instruction
creates an <code>AdapterEventQueue</code> PDA to which all processed orders containing the <code>MarginUser</code> account will be pushed.</p>
<p>Users are responsible for handling the consumption logic for their adapter. To clear events after processing, use the <a href="orderbook/instructions/event_adapter/pop_adapter_events/struct.PopAdapterEvents.html"><code>PopAdapterEvents</code></a> instruction.</p>
<h2 id="jet-fixed-term-market-tickets"><a href="#jet-fixed-term-market-tickets">Jet Fixed Term Market Tickets</a></h2>
<p>Jet fixed term market tickets are fungible spl tokens that must be staked to claim their underlying value. In order to create tickets, a user must either
place a lend order on the orderbook, or exchange the token underlying the fixed term market (in practice, almost never
will users do this, as it locks their tokens for at least the tenor of the market).</p>
<h4 id="ticket-kinds-and-redemption"><a href="#ticket-kinds-and-redemption">Ticket kinds and redemption</a></h4>
<p>The program allots for two types of ticket redemption. The <a href="tickets/state/struct.ClaimTicket.html"><code>ClaimTicket</code></a> is given when
a user stakes directly with the program. As there is no information about the creation of the tickets, a <code>ClaimTicket</code> does not
have accounting for principal or interest, and only contains a redemptive value.</p>
<p>Conversely, a <a href="tickets/state/struct.SplitTicket.html"><code>SplitTicket</code></a> contains split principal and interest values. As well as
the slot it was minted. To create a <code>SplitTicket</code>, you must configure your <a href="orderbook/state/struct.OrderParams.html"><code>OrderParams</code></a> <code>auto_stake</code> flag to
<code>true</code>. This will allow to program to immediately stake your tickets as the match event is processed.</p>
<p>After the tenor has passed, the ticket may be redeemed for the underlying value with the program. Also included are instructions
for transferring ownership of a ticket.</p>
<h2 id="debt-and-term-loans"><a href="#debt-and-term-loans">Debt and Term Loans</a></h2>
<p>When using a <code>jet-margin</code> account to post a collateralized borrow order, an <a href="struct@crate::orderbook::state::debt::TermLoan"><code>TermLoan</code></a> is created to track
amounts owed to the program. <code>TermLoan</code>s are either repaid manually by the user, or handled by an off-chain liquidator.</p>
</div></details><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="mod" href="accounts/index.html" title="jet_fixed_term::accounts mod">accounts</a></div><div class="item-right docblock-short">An Anchor generated module, providing a set of structs
mirroring the structs deriving <code>Accounts</code>, where each field is
a <code>Pubkey</code>. This is useful for specifying accounts for a client.</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="control/index.html" title="jet_fixed_term::control mod">control</a></div><div class="item-right docblock-short">Program instructions and structs related to authoritative control of the program state
Control module for the <code>jet-fixed-term-market</code> program.</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="events/index.html" title="jet_fixed_term::events mod">events</a></div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="instruction/index.html" title="jet_fixed_term::instruction mod">instruction</a></div><div class="item-right docblock-short">An Anchor generated module containing the program’s set of
instructions, where each method handler in the <code>#[program]</code> mod is
associated with a struct defining the input arguments to the
method. These should be used directly, when one wants to serialize
Anchor instruction data, for example, when speciying
instructions on a client.</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="jet_fixed_term/index.html" title="jet_fixed_term::jet_fixed_term mod">jet_fixed_term</a></div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="margin/index.html" title="jet_fixed_term::margin mod">margin</a></div><div class="item-right docblock-short">Program instructions, methods and structs related to the use of margin accounts with the fixed-term program</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="orderbook/index.html" title="jet_fixed_term::orderbook mod">orderbook</a></div><div class="item-right docblock-short">Program instructions and structs related to use of the on chain orderbook</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="program/index.html" title="jet_fixed_term::program mod">program</a></div><div class="item-right docblock-short">Module representing the program.</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="seeds/index.html" title="jet_fixed_term::seeds mod">seeds</a></div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="tickets/index.html" title="jet_fixed_term::tickets mod">tickets</a></div><div class="item-right docblock-short">Program instructions and structs related to the redeemable tickets</div></div></div><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.FixedTermErrorCode.html" title="jet_fixed_term::FixedTermErrorCode enum">FixedTermErrorCode</a></div></div></div><h2 id="statics" class="small-section-header"><a href="#statics">Statics</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="static" href="static.ID.html" title="jet_fixed_term::ID static">ID</a></div><div class="item-right docblock-short">The static program ID</div></div></div><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.check_id.html" title="jet_fixed_term::check_id fn">check_id</a></div><div class="item-right docblock-short">Confirms that a given pubkey is equivalent to the program ID</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.entry.html" title="jet_fixed_term::entry fn">entry</a></div><div class="item-right docblock-short">The Anchor codegen exposes a programming model where a user defines
a set of methods inside of a <code>#[program]</code> module in a way similar
to writing RPC request handlers. The macro then generates a bunch of
code wrapping these user defined methods into something that can be
executed on Solana.</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.entrypoint.html" title="jet_fixed_term::entrypoint fn">entrypoint</a><a title="unsafe function" href="#"><sup>⚠</sup></a></div><div class="item-right docblock-short">Safety</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.id.html" title="jet_fixed_term::id fn">id</a></div><div class="item-right docblock-short">Returns the program ID</div></div></div></section></div></main><div id="rustdoc-vars" data-root-path="../" data-current-crate="jet_fixed_term" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.65.0 (897e37553 2022-11-02)" ></div></body></html>